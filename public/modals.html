<!-- Car Details Modal -->
<div class="modal fade" id="carDetailsModal" tabindex="-1" role="dialog" aria-labelledby="carDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="carDetailsModalLabel">Car Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="editCarId" name="carId">
        
        <ul class="nav nav-tabs" id="carDetailsTabs">
          <li class="nav-item">
            <a class="nav-link active" id="car-details-tab" data-toggle="tab" href="#basicInfoTab">Car Details</a>
          </li>
        </ul>
        
        <div class="tab-content mt-3">
          <div class="tab-pane fade show active" id="basicInfoTab">
            <div class="card mb-3 car-details-view">
              <div class="card-header bg-light">
                <h5 class="mb-0">Vehicle Information</h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Make:</strong></label>
                      <p id="carDetailsMake" class="mb-1">-</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Model:</strong></label>
                      <p id="carDetailsModel" class="mb-1">-</p>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Year:</strong></label>
                      <p id="carDetailsYear" class="mb-1">-</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Registration:</strong></label>
                      <p id="carDetailsRegistration" class="mb-1">-</p>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Mileage:</strong></label>
                      <p id="carDetailsMileage" class="mb-1">-</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label><strong>Colour:</strong></label>
                      <p id="carDetailsColor" class="mb-1">-</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card mt-3 car-details-view">
              <div class="card-header bg-light">
                <h5 class="mb-0">Owner Information</h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label><i class="fas fa-user mr-2"></i><strong>Name:</strong></label>
                      <p id="carDetailsOwnerName" class="mb-1">-</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label><i class="fas fa-phone mr-2"></i><strong>Contact:</strong></label>
                      <p id="carDetailsOwnerContact" class="mb-1">-</p>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label><i class="fas fa-envelope mr-2"></i><strong>Email:</strong></label>
                      <p id="carDetailsOwnerEmail" class="mb-1">-</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card mt-3 car-details-view">
              <div class="card-header bg-light">
                <h5 class="mb-0">Notes</h5>
              </div>
              <div class="card-body">
                <p id="carDetailsNotes" class="mb-0">-</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="editCarDetailsBtn">Edit</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Custom Reminder Modal -->
<div class="modal fade" id="addCustomReminderModal" tabindex="-1" role="dialog" aria-labelledby="addCustomReminderModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addCustomReminderModalLabel">Add Custom Reminder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="customReminderForm">
          <input type="hidden" id="customReminderCarId" name="carId">
          
          <div class="form-group">
            <label>Reminder Type</label>
            <select class="form-control" id="customReminderType" name="type" required>
              <option value="custom">Custom</option>
              <option value="service">Service</option>
              <option value="tax">Tax</option>
              <option value="insurance">Insurance</option>
              <option value="tireChange">Tire Change</option>
              <option value="registration">Registration</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Date</label>
            <input type="date" class="form-control" id="customReminderDate" name="date" required>
          </div>
          
          <div class="form-group">
            <label>Message</label>
            <textarea class="form-control" id="customReminderMessage" name="message" required></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="saveCustomReminderBtn">Save Reminder</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Early Return / Completing a Rental -->
<div class="modal fade" id="earlyReturnModal" tabindex="-1" role="dialog" aria-labelledby="earlyReturnModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="earlyReturnForm">
        <div class="modal-header">
          <h5 class="modal-title" id="earlyReturnModalLabel">Early Return / Complete Rental</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="rentalId" id="earlyReturnRentalId">
          <div class="form-group">
            <label for="earlyReturnRating">Customer Rating</label>
            <select class="form-control" name="rating" id="earlyReturnRating" required>
              <option value="">Select Rating</option>
              <option value="Good">Good</option>
              <option value="Bad">Bad</option>
            </select>
          </div>
          <div class="form-group">
            <label for="earlyReturnComment">Comment</label>
            <textarea class="form-control" name="comment" id="earlyReturnComment" rows="2" required></textarea>
          </div>
          <div class="form-group">
            <label for="earlyReturnReason">Reason for Ending Rental</label>
            <textarea class="form-control" name="reason" id="earlyReturnReason" rows="2" required></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Submit End Rental</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal for Updating Reminders on a Car -->
<div class="modal fade" id="reminderModal" tabindex="-1" role="dialog" aria-labelledby="reminderModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="reminderModalLabel">Add New Reminder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="reminderForm">
          <input type="hidden" id="reminderId" name="reminderId">
          
          <div class="form-row">
            <div class="form-group col-md-8">
              <label for="reminderTitle">Title*</label>
              <input type="text" class="form-control" id="reminderTitle" name="title" required>
            </div>
            <div class="form-group col-md-4">
              <label for="reminderDate">Due Date*</label>
              <input type="date" class="form-control" id="reminderDate" name="date" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="reminderType">Type</label>
              <select class="form-control" id="reminderType" name="type">
                <option value="business">Business</option>
                <option value="car">Car Related</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="reminderCategory">Category</label>
              <select class="form-control" id="reminderCategory" name="category">
                <option value="custom">Custom</option>
                <option value="service">Service</option>
                <option value="tax">Tax</option>
                <option value="insurance">Insurance</option>
                <option value="tireChange">Tire Change</option>
                <option value="registration">Registration</option>
                <option value="meeting">Meeting</option>
                <option value="payment">Payment</option>
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="reminderPriority">Priority</label>
              <select class="form-control" id="reminderPriority" name="priority">
                <option value="medium">Medium</option>
                <option value="high">High</option>
                <option value="low">Low</option>
              </select>
            </div>
          </div>
          
          <div class="form-group car-related-field" style="display: none;">
            <label for="reminderCarId">Related Car</label>
            <select class="form-control" id="reminderCarId" name="carId">
              <option value="">-- Select a Car --</option>
              <!-- Cars will be loaded here -->
            </select>
          </div>
          
          <div class="form-group">
            <label for="reminderDescription">Description</label>
            <textarea class="form-control" id="reminderDescription" name="description" rows="3"></textarea>
          </div>
          
          <div class="form-group">
            <label for="reminderNotes">Notes</label>
            <textarea class="form-control" id="reminderNotes" name="notes" rows="2"></textarea>
          </div>
          
          <div class="form-group completed-field" style="display: none;">
            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="reminderCompleted" name="completed">
              <label class="custom-control-label" for="reminderCompleted">Mark as Completed</label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="saveReminderBtn">Save Reminder</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Extending a Rental -->
<div class="modal fade" id="extendRentalModal" tabindex="-1" role="dialog" aria-labelledby="extendRentalModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="extendRentalForm">
        <div class="modal-header">
          <h5 class="modal-title" id="extendRentalModalLabel">Extend Rental</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="rentalId" id="extendRentalId">
          <div class="form-group">
            <label for="extendReturnDate">New Return Date & Time</label>
            <input type="datetime-local" class="form-control" name="newReturnDate" id="extendReturnDate" required>
          </div>
          <div class="form-group">
            <label for="extendReason">Reason for Extension</label>
            <textarea class="form-control" name="reason" id="extendReason" rows="2" required></textarea>
          </div>
          <div class="form-group">
            <label for="extendFee">Additional Fee</label>
            <input type="number" class="form-control" name="additionalFee" id="extendFee" step="0.01" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Extend Rental</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal for Adding Notes to a Rental -->
<div class="modal fade" id="addNotesModal" tabindex="-1" role="dialog" aria-labelledby="addNotesModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="addNotesForm">
        <div class="modal-header">
          <h5 class="modal-title" id="addNotesModalLabel">Add Notes to Rental</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Error message area -->
          <div id="noteError" class="alert alert-danger" style="display: none;"></div>
          
          <input type="hidden" name="rentalId" id="notesRentalId">
          
          <div class="form-group">
            <label for="noteContent">Note Content</label>
            <textarea class="form-control" name="noteContent" id="noteContent" rows="4" required></textarea>
            <small class="form-text text-muted">Enter the details you want to add as a note</small>
          </div>
          
          <div class="form-group">
            <label for="author">Author (Optional)</label>
            <input type="text" class="form-control" id="author" name="author" placeholder="Your name">
            <small class="form-text text-muted">Leave blank to use 'User' as the default</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Note</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal for Viewing Notes -->
<div class="modal fade" id="viewNotesModal" tabindex="-1" role="dialog" aria-labelledby="viewNotesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewNotesModalLabel">Rental Notes</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="notesContent" class="p-3 bg-light rounded">
          <!-- Notes content will be displayed here -->
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Viewing Documents -->
<div class="modal fade" id="viewDocumentsModal" tabindex="-1" role="dialog" aria-labelledby="viewDocumentsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewDocumentsModalLabel">Rental Documents</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Document previews will be displayed here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Documents Modal -->
<div class="modal fade" id="addDocumentsModal" tabindex="-1" role="dialog" aria-labelledby="addDocumentsModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="addDocumentsForm" enctype="multipart/form-data">
        <div class="modal-header">
          <h5 class="modal-title" id="addDocumentsModalLabel">Add Documents to Rental</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Error message area -->
          <div id="documentError" class="alert alert-danger" style="display: none;"></div>
          
          <input type="hidden" name="rentalId" id="documentsRentalId">
          
          <div class="form-group">
            <label><i class="fas fa-file-upload mr-2"></i>Upload Documents</label>
            <div class="custom-file">
              <input type="file" class="custom-file-input" id="rentalDocuments" name="documents" multiple accept="image/*">
              <label class="custom-file-label" for="rentalDocuments">Choose documents...</label>
            </div>
            <small class="form-text text-muted">You can select multiple documents/images</small>
            <div id="documentPreview" class="mt-3 row">
              <!-- Document previews will be added here -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Upload Documents</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Add this near the top of modals.html -->
<div class="modal fade" id="addNoteModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Note to Rental</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="addNoteForm">
          <input type="hidden" id="addNoteRentalId">
          <div class="form-group">
            <label for="noteContent">Note</label>
            <textarea class="form-control" id="noteContent" rows="3" required></textarea>
          </div>
          <div id="existingNotes" class="mt-4">
            <h6>Existing Notes</h6>
            <div class="existing-notes-list"></div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="saveNoteBtn">Add Note</button>
      </div>
    </div>
  </div>
</div> 